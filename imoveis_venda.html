<!DOCTYPE html>
<html class="light" lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Comprar Imóveis em Palhoça, SC | Curtindo SC</title>
<meta name="description" content="Confira as melhores opções de casas, lotes e terrenos à venda nas praias de Palhoça.">
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700;800;900&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,0" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script> 
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script id="tailwind-config">
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#1BAEBD", 
            "background-light": "#f6f7f8", 
            "background-dark": "#101922", 
            "secondary": "#003366", 
            "accent": "#FF7F50", 
            "sand": { DEFAULT: "#f5f3f0", dark: "#e8e0d5" }
          },
          fontFamily: {
            "display": ["Work Sans"],
            "body": ["Lato", "sans-serif"]
          },
          borderRadius: {"DEFAULT": "0.5rem", "lg": "0.75rem", "xl": "1rem", "full": "9999px"},
        },
      },
    }
</script>
<style>
    .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
    .logo-img { height: 40px; width: auto; border-radius: 9999px; object-fit: cover; }
    .modal { display: none; position: fixed; inset: 0; background-color: rgba(0, 0, 0, 0.75); z-index: 50; align-items: center; justify-content: center; padding: 1rem; }
    .modal.show { display: flex; }
    .modal-content { max-height: 95vh; overflow-y: auto; }
    .flatpickr-calendar { z-index: 9999; }
    .gallery-thumbnail { height: 70px; width: 70px; object-fit: cover; cursor: pointer; border: 3px solid transparent; transition: border-color 0.2s; }
    .gallery-thumbnail.active { border-color: #1BAEBD; opacity: 1; }
    .main-media-container { position: relative; width: 100%; height: 100%; min-height: 300px; display: flex; align-items: center; justify-content: center; }
    .main-media-container iframe { width: 100%; height: 100%; min-height: 300px; position: absolute; }
</style>
</head>
<body class="font-body bg-background-light dark:bg-background-dark text-gray-800 dark:text-gray-200">
<div class="relative flex h-auto min-h-screen w-full flex-col group/design-root overflow-x-hidden">
<div class="layout-container flex h-full grow flex-col">

<header class="sticky top-0 z-50 w-full bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-sm border-b border-gray-200 dark:border-gray-800">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="flex items-center justify-between whitespace-nowrap h-16">
<div class="flex items-center gap-4 text-gray-800 dark:text-gray-100">
    <img src="https://media.bio.site/sites/15fc0509-6c95-4782-9a79-fe69fe78ce69/fetqsktutwxDYURdXexgei.jpg" alt="Logo Curtindo SC" class="logo-img">
    <h2 class="text-xl font-bold leading-tight tracking-[-0.015em] text-gray-900 dark:text-white">Curtindo SC</h2>
</div>
<div class="hidden md:flex flex-1 justify-end gap-8">
<div class="flex items-center gap-9">
    <a class="text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary text-sm font-medium leading-normal transition-colors" href="index.html">Início</a>
    <a class="text-primary dark:text-primary font-bold text-sm leading-normal transition-colors" href="imoveis_venda.html">Comprar</a>
    <a class="text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary text-sm font-medium leading-normal transition-colors" href="imoveis_aluguel.html">Alugar</a>
    <a class="text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary text-sm font-medium leading-normal transition-colors" href="sobre_nos.html">Sobre Nós</a>
    <a class="text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary text-sm font-medium leading-normal transition-colors" href="contato.html">Contato</a>
</div>
<a class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-primary text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-primary/90 transition-colors" href="https://wa.me/5548999998888" target="_blank">
<span class="truncate">Fale Conosco</span>
</a>
</div>
<button class="md:hidden text-gray-800 dark:text-gray-100">
<span class="material-symbols-outlined text-2xl">menu</span>
</button>
</div>
</div>
</header>

<main class="w-full">
<section class="relative h-[50vh] min-h-[400px] w-full">
<div class="absolute inset-0 bg-secondary/60 z-10"></div>
<img alt="Casa a Venda Palhoça" class="h-full w-full object-cover" src="https://static.ndmais.com.br/2023/12/palhoca-foto-aerea.jpg"/>
<div class="absolute inset-0 z-20 flex flex-col items-center justify-center text-center text-white p-4">
<h1 class="text-4xl md:text-6xl font-display font-bold tracking-tight leading-tight drop-shadow-lg">Invista no seu Sonho</h1>
<p class="mt-4 max-w-2xl text-lg md:text-xl text-gray-200 drop-shadow-md">Casas, terrenos e lotes nas melhores praias de Palhoça.</p>
</div>
</section>

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
<div class="flex flex-col sm:flex-row justify-between items-center mb-6 gap-4">
<p class="text-xl font-bold text-gray-900 dark:text-white">Imóveis Disponíveis para Venda</p>
<div class="relative w-full sm:w-48">
<select class="w-full appearance-none bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 py-2 pl-3 pr-8 rounded-lg leading-tight focus:outline-none focus:bg-white dark:focus:bg-gray-800 focus:border-primary dark:focus:border-primary-dark focus:ring-1 focus:ring-primary/50 dark:focus:ring-primary-dark/50 text-sm">
<option>Mais Relevantes</option>
<option>Menor Preço</option>
<option>Maior Preço</option>
<option>Mais Recentes</option>
</select>
<div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300">
<span class="material-symbols-outlined text-lg"> expand_more </span>
</div>
</div>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="properties-grid">
</div>
<div class="flex justify-center mt-12">
<button class="py-3 px-6 bg-primary/10 dark:bg-secondary/20 text-primary dark:text-secondary font-bold rounded-lg hover:bg-primary/20 dark:hover:bg-secondary/30 transition-colors">Carregar mais imóveis</button>
</div>
</div>
</main>

<div id="details-modal" class="modal">
    <div class="modal-content bg-white dark:bg-background-dark rounded-xl shadow-2xl w-full max-w-5xl flex flex-col lg:flex-row relative">
        <button id="close-modal-button" class="absolute top-4 right-4 z-40 p-2 rounded-full bg-white/50 dark:bg-gray-900/50 text-gray-800 dark:text-white text-xl hover:bg-white dark:hover:bg-gray-700 transition-colors">
            <span class="material-symbols-outlined">close</span>
        </button>
        
        <div class="w-full lg:w-2/3 relative h-96 lg:h-auto overflow-hidden rounded-t-xl lg:rounded-l-xl lg:rounded-t-none p-4 dark:bg-gray-900">
            <div class="main-media-container mb-4 rounded-lg shadow-lg">
                <img id="modal-main-image" src="" alt="Imagem principal do imóvel" class="w-full h-full object-cover rounded-lg" style="min-height: 350px;">
                <iframe id="modal-main-video" src="" frameborder="0" allow="autoplay; encrypted-media; gyroscope;" allowfullscreen class="absolute inset-0 w-full h-full hidden rounded-lg"></iframe>
            </div>
            <div id="modal-thumbnails" class="flex gap-2 overflow-x-auto pb-2"></div>
        </div>

        <div class="w-full lg:w-1/3 p-6 space-y-4">
            <h2 id="modal-title" class="font-display text-2xl font-bold text-secondary dark:text-white"></h2>
            <p id="modal-location" class="text-gray-600 dark:text-gray-400 text-sm flex items-center gap-1"><span class="material-symbols-outlined text-lg">location_on</span></p>

            <div class="flex flex-wrap items-center gap-x-4 gap-y-2 text-gray-700 dark:text-gray-300 border-b pb-4">
                <span id="modal-rooms" class="flex items-center gap-1.5"><span class="material-symbols-outlined text-primary">bed</span></span>
                <span id="modal-baths" class="flex items-center gap-1.5"><span class="material-symbols-outlined text-primary">bathtub</span></span>
                <span id="modal-area" class="flex items-center gap-1.5"><span class="material-symbols-outlined text-primary">straighten</span></span>
            </div>

            <div id="modal-price-container">
                <p id="modal-price-label" class="text-lg font-bold text-gray-600 dark:text-gray-300"></p>
                <p id="modal-price" class="text-4xl font-black text-primary dark:text-white mt-1"></p>
                <div id="dates-info" class="text-sm text-red-500 font-medium mt-2"></div>
            </div>
            
            <div id="modal-features-list" class="pt-4 border-t border-gray-200 dark:border-gray-700">
                <h3 class="font-display text-lg font-bold text-secondary dark:text-white mb-2">Características</h3>
                <div id="features-container" class="grid grid-cols-2 gap-2 text-sm text-gray-700 dark:text-gray-300"></div>
            </div>
            
            <form id="modal-rent-form" class="space-y-4 pt-4 border-t border-gray-200 dark:border-gray-700 hidden">
               <p class="text-red-500">Erro: Este imóvel é de aluguel e não deveria aparecer na página de venda.</p>
            </form>

            <form id="modal-sale-form" class="space-y-4 pt-4 border-t border-gray-200 dark:border-gray-700 hidden">
                <p class="text-sm text-gray-600 dark:text-gray-300">Interessado na compra? Preencha para contato imediato.</p>
                <input type="text" id="sale-guest-name" placeholder="Seu nome" required class="w-full form-input rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                <input type="tel" id="sale-guest-contact" placeholder="Seu WhatsApp" required class="w-full form-input rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                <button type="submit" class="w-full h-12 px-4 bg-secondary text-white font-bold rounded-lg hover:bg-secondary/90 transition-colors">Falar com Corretor (Venda)</button>
            </form>
            
        </div>
    </div>
</div>

<div id="alert-modal" class="modal">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm text-center">
        <h2 id="alert-title" class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">Aviso</h2>
        <p id="alert-message" class="mb-6 text-gray-600 dark:text-gray-300"></p>
        <button id="alert-ok-button" class="px-6 py-2 bg-gray-900 dark:bg-gray-100 dark:text-gray-900 text-white rounded-lg font-semibold">OK</button>
    </div>
</div>

<script>
    // DADOS COMPLETOS (MANTIDOS IGUAIS PARA O MODAL FUNCIONAR)
    const propertyData = [
        {
            id: 'venda_luxo',
            title: 'Casa de Luxo c/ Piscina na Praia do Sonho',
            location: 'Praia do Sonho, Palhoça',
            mode: 'sale',
            price_sale: 2500000,
            price_daily: 1800, 
            rooms: 4, baths: 5, area: 220,
            description: "Esta casa redefine o luxo na Praia do Sonho...",
            images: ["https://lh3.googleusercontent.com/aida-public/AB6AXuAQWr66uTJiCxpEEC2kU9O7mC8AFMT39XsOr4c6O5AhVzf6bDTAa5RYR76ksJQ6dRKt6dTVa2nE9HjrecWUDea-PxInZ8eTjGrNoEr84PEyTTIaoLqAnYf-wu8WLlmEUMP9UwlEb1ZiIULHSZavPV2lZQMd4MRtDFCzHZReFEZYVT5fH5UHxMDLxp_4R2XcAnsQGz-VG2G1wqi8oNoUTllBninRP2_nclvzdgUtFdEN5jikOUfuOSNYAmbIACSBOAoubR2JxPdc1w", "https://lh3.googleusercontent.com/aida-public/AB6AXuB7IIfBJrYidgqgCvKOXkQSxvY5fcjTh31ssjQIeVEJvVz_YOqvRC2w5ArigrMKnOEdsV21pcmQLT77hsv0N8S2UJaV_4u3zqEZ1euHHCRsY0RfLg7mVcJjd_FcjQ7np5AocuKmEXbtFIHi_vDWmVdfBFWBmlAotzRebSJWCoUbM0FhsMYIVIC1JyH8NQarRAnJA4tTS-M0CJe77A-Y6xFhQ72JPe9dI_eegc8bYvcT2bOFVOlrPFE3rxhsE4V1SyNwmSJDLRZSVw8"],
            features: ['Piscina Infinita', 'Vista para o Mar', 'Acesso Privativo', 'Espaço Gourmet']
        },
        {
            id: 'aluguel_refugio',
            title: 'Refúgio em Meio à Natureza',
            location: 'Enseada de Brito, Palhoça',
            mode: 'rent',
            price_sale: 800000, 
            price_daily: 650, 
            rooms: 2, baths: 1, area: 150,
            description: "Cabana charmosa...",
            available_start: { seconds: new Date(2025, 0, 1).getTime() / 1000 }, 
            available_end: { seconds: new Date(2028, 11, 31).getTime() / 1000 }, 
            images: ["https://lh3.googleusercontent.com/aida-public/AB6AXuCkJXXkq4PB_UELQ6Or3FsXQolSU713nYjOVcOg7O7h9mZAMFnw9MLSucLOIX9Xl1UuJz-opoW2DynbxlFCA6jAjz8MblLDqWpcQikwcGl9sFEGvP5WD2Hw1xyprv5Tz8LdpqvA2En5LrYvk93gob6XOpTFdQPhXMdP3SVezlZhgwwtp7JeOSObNCiEA7z_kaov6rgyNhTfy-D2BZ8WdodHZYO0Z7uv9V5sts2uiNskYExbKQzjz7xvYbUrgUAK4W9lxIfRcII13nk", "https://lh3.googleusercontent.com/aida-public/AB6AXuAUzRiXmLJ42_onfiXrxsiK4CJfeSm4orWZaDZQB7ugJwzvxvDhdjOSS2utvEHnG_iEy0caSRqUJJKl_zAAdSJddrA2W7H8SjkLC99JEYxcq4QF7EFhIq1Pjj-ggjfTKXgwdxL3rLAHKkt0pib5LWca-PGaRkQ5rP9wpN9hzgdvksbDh8KDVrqet_fPipJeVgm4PmJc4gDAJRn0OKuREijyyxjpLT8mfmoNVzEKvcB5plxnO3JWbjdgh62lYaULmC6C2V6g9jz9cms"],
            features: ['Mobiliado', 'Próximo à Trilha', 'Lareira', 'Wi-Fi']
        },
        {
            id: 'venda_loft',
            title: 'Loft Mobiliado para Venda',
            location: 'Praia da Pinheira, Palhoça',
            mode: 'sale',
            price_sale: 480000,
            price_daily: 400, 
            rooms: 1, baths: 1, area: 50,
            description: "Seu refúgio particular...",
            images: ["https://lh3.googleusercontent.com/aida-public/AB6AXuCkJXXkq4PB_UELQ6Or3FsXQolSU713nYjOVcOg7O7h9mZAMFnw9MLSucLOIX9Xl1UuJz-opoW2DynbxlFCA6jAjz8MblLDqWpcQikwcGl9sFEGvP5WD2Hw1xyprv5Tz8LdpqvA2En5LrYvk93gob6XOpTFdQPhXMdP3SVezlZhgwwtp7JeOSObNCiEA7z_kaov6rgyNhTfy-D2BZ8WdodHZYO0Z7uv9V5sts2uiNskYExbKQzjz7xvYbUrgUAK4W9lxIfRcII13nk", "https://lh3.googleusercontent.com/aida-public/AB6AXuAUzRiXmLJ42_onfiXrxsiK4CJfeSm4orWZaDZQB7ugJwzvxvDhdjOSS2utvEHnG_iEy0caSRqUJJKl_zAAdSJddrA2W7H8SjkLC99JEYxcq4QF7EFhIq1Pjj-ggjfTKXgwdxL3rLAHKkt0pib5LWca-PGaRkQ5rP9wpN9hzgdvksbDh8KDVrqet_fPipJeVgm4PmJc4gDAJRn0OKuREijyyxjpLT8mfmoNVzEKvcB5plxnO3JWbjdgh62lYaULmC6C2V6g9jz9cms"],
            features: ['Mobiliado', 'Perto da Praia', 'Segurança', 'Baixo Custo']
        },
        {
            id: 'venda_terreno',
            title: 'Terreno em Condomínio Fechado',
            location: 'Praia da Pinheira, Palhoça',
            mode: 'sale',
            price_sale: 800000, 
            price_daily: 0, 
            rooms: 0, baths: 0, area: 800,
            description: "Terreno amplo de 800m²...",
            images: ["https://lh3.googleusercontent.com/aida-public/AB6AXuDW5KunHpGD5ge6GVTRYoxzdjDjz1xvRwrcehMbWeJP9g6kkgr2sYQm_QAREW24UZcbDvIQ9mqyh_06CPdjH2Ib4TkCnG2pl5Er687kcgZFq9RvXyFh7e4ianyEhBdRVUAi0jMVsn5t3Uw4mqTRhjJVxOp-LtFR2lmDJLvtyV1LbcGsBKpeuC1MVpm4Bn_l2yZp8e9ToslacCFFgT-5xqoB1yNkkamJJ9fd8s01tVorQ2kSc4b_EW0ti1LPAJ-mhqJCzVDkPvye9Fg", "https://lh3.googleusercontent.com/aida-public/AB6AXuC7_IZ_RKfqXMvEmOuWWWYJ7Vvd0peAE7JEBRtc1wQQbdJglfsi3HBJZimbIYbpHXJ_ZPku-aZR8zURLWkNsBNfN8kXuw460EjGB3o1ckkkRy2BFU9KioEGhv8pS9HkEMn8Ry05FtSCtc0JLJdxbS2m6o7fsvKNQppDmEe7dhLUmPH8_8UIyXFSg08zRX2tSR3dB3HRSxokrJo9Sb4GB6r9Ceqx9TD9LCfQvLme1fZiR5Q-OPmwWTo4dc6QUTqwwTsPblGo1BNsbo"],
            features: ['Condomínio Fechado', 'Segurança 24h', 'Pronto para Construir', '800m²']
        },
        {
            id: 'aluguel_apto',
            title: 'Apto na Guarda do Embaú (Temporada)',
            location: 'Guarda do Embaú, Palhoça',
            mode: 'rent',
            price_sale: 650000, 
            price_daily: 450, 
            rooms: 2, baths: 2, area: 80,
            description: "Apartamento moderno...",
            available_start: { seconds: new Date(2024, 11, 20).getTime() / 1000 }, 
            available_end: { seconds: new Date(2028, 11, 31).getTime() / 1000 }, 
            images: ["https://lh3.googleusercontent.com/aida-public/AB6AXuBrhKgRWX177WRPwk_g13wOtuyRGA89CkVKEHAMS0nRCh5VYgy6vjjAovXM6hhgKKitQMKei69HWd8_RE9_hFEwzVlPpk8BkStcHlKP9ic2hhZ_RYpn-ljttn8DyMyeuRlGksQMHufgLtUlrziCnygwnNxvWXyE0pA8MF8nAl0YX1jy8g15VsYEMNoVOaQJLLmho8r--H9BGibx_LPH8iGRw671MDfKSJc9bCRGSozavZtNLcMo6kJphfPSfJyXxnn4Oksiedb1UPQ", "https://lh3.googleusercontent.com/aida-public/AB6AXuAQWr66uTJiCxpEEC2kU9O7mC8AFMT39XsOr4c6O5AhVzf6bDTAa5RYR76ksJQ6dRKt6dTVa2nE9HjrecWUDea-PxInZ8eTjGrNoEr84PEyTTIaoLqAnYf-wu8WLlmEUMP9UwlEb1ZiIULHSZavPV2lZQMd4MRtDFCzHZReFEZYVT5fH5UHxMDLxp_4R2XcAnsQGz-VG2G1wqi8oNoUTllBninRP2_nclvzdgUtFdEN5jikOUfuOSNYAmbIACSBOAoubR2JxPdc1w"],
            features: ['2 Quartos', 'Perto da Praia', 'Churrasqueira', 'Mobiliado']
        },
        {
        id: 'venda_casa_anderson', 
        title: 'Casa 2 Pavimentos em Terreno de 360m²', 
        location: 'Palhoça, SC', // Se souber o bairro (ex: Aririu), troque aqui
        mode: 'sale', 
        price_sale: 000000, // ⚠️ IMPORTANTE: Coloque o valor aqui (ex: 350000) sem pontos
        price_daily: 0, 
        rooms: 2, // ⚠️ Ajuste o número de quartos se souber
        baths: 1, // ⚠️ Ajuste o número de banheiros se souber
        area: 110, // Área construída conforme o print
        description: "Oportunidade! Terreno amplo com 360m². Casa de 2 pavimentos com aproximadamente 110m² de área construída. Escritura em processo de finalização (já está toda paga). Proprietário aceita negociação.",
        images: [
            "COLE_AQUI_O_LINK_DA_FOTO_PRINCIPAL.jpg",
            "COLE_AQUI_O_LINK_DA_FOTO_2.jpg"
        ],
        features: ['Terreno 360m²', '2 Pavimentos', 'Aceita Negociação', 'Amplo Quintal']
    },
    ];

    let currentProperty = null;
    let flatpickrInstance = null; 
    const MODAL_WHATSAPP_NUMBER = '5548999998888'; 

    const formatBRL = (number) => number ? number.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }) : 'Consulte';
    const formatTimestamp = (timestamp) => {
        if (timestamp && timestamp.seconds) {
            return new Date(timestamp.seconds * 1000).toLocaleDateString('pt-BR');
        }
        return 'Indefinido';
    };
    const timestampToISODate = (timestamp) => {
        if (timestamp && timestamp.seconds) {
            return new Date(timestamp.seconds * 1000).toISOString().split('T')[0];
        }
        return null;
    };
    const showAlert = (message, title = "Aviso") => {
        const alertModal = document.getElementById('alert-modal');
        if (alertModal) {
            document.getElementById('alert-title').textContent = title; 
            document.getElementById('alert-message').textContent = message; 
            alertModal.classList.add('show'); 
        }
    };

    function changeMainMedia(mediaUrl, isVideo = false) {
        const img = document.getElementById('modal-main-image');
        const iframe = document.getElementById('modal-main-video');
        if (isVideo) {
            img.classList.add('hidden');
            iframe.src = mediaUrl;
            iframe.classList.remove('hidden');
        } else {
            iframe.classList.add('hidden');
            iframe.src = '';
            img.src = mediaUrl;
            img.classList.remove('hidden');
        }
        document.querySelectorAll('.gallery-thumbnail').forEach(thumb => {
            thumb.classList.remove('active');
            if (thumb.dataset.mediaUrl === mediaUrl) thumb.classList.add('active');
        });
    }

    function openModal(propertyId) {
        currentProperty = propertyData.find(p => p.id === propertyId);
        const detailsModal = document.getElementById('details-modal');
        if (!currentProperty || !detailsModal) { showAlert('Imóvel não encontrado.', 'Erro'); return; }

        document.getElementById('modal-title').textContent = currentProperty.title;
        document.getElementById('modal-location').innerHTML = `<span class="material-symbols-outlined text-lg">location_on</span>${currentProperty.location}`;
        document.getElementById('modal-rooms').innerHTML = `<span class="material-symbols-outlined text-primary">bed</span>${currentProperty.rooms} Quartos`;
        document.getElementById('modal-baths').innerHTML = `<span class="material-symbols-outlined text-primary">bathtub</span>${currentProperty.baths} Banheiros`;
        document.getElementById('modal-area').innerHTML = `<span class="material-symbols-outlined text-primary">straighten</span>${currentProperty.area} m²`;
        
        const featuresContainer = document.getElementById('features-container');
        featuresContainer.innerHTML = currentProperty.features.map(f => 
            `<span class="flex items-center gap-1.5"><span class="material-symbols-outlined text-primary">check_circle</span>${f}</span>`
        ).join('');

        const thumbnailsContainer = document.getElementById('modal-thumbnails');
        thumbnailsContainer.innerHTML = '';
        
        const mediaItems = [];
        if (currentProperty.images) currentProperty.images.forEach(imgUrl => mediaItems.push({ type: 'image', url: imgUrl }));
        if (currentProperty.videoUrl) mediaItems.push({ type: 'video', url: currentProperty.videoUrl });

        mediaItems.forEach((media) => {
            const isVideo = media.type === 'video';
            const thumb = document.createElement('img');
            thumb.className = 'gallery-thumbnail rounded-md';
            thumb.src = isVideo ? 'https://placehold.co/70x70/003366/FFFFFF?text=VÍDEO' : media.url;
            thumb.dataset.mediaUrl = media.url;
            thumb.onclick = () => changeMainMedia(media.url, isVideo);
            thumbnailsContainer.appendChild(thumb);
        });

        if (mediaItems.length > 0) changeMainMedia(mediaItems[0].url, mediaItems[0].type === 'video');

        const mode = currentProperty.mode || 'sale';
        const rentForm = document.getElementById('modal-rent-form');
        const saleForm = document.getElementById('modal-sale-form');
        const priceLabelEl = document.getElementById('modal-price-label');
        const priceValueEl = document.getElementById('modal-price');
        const datesInfoEl = document.getElementById('dates-info');

        if (mode === 'sale') {
            priceLabelEl.textContent = 'Preço de Venda';
            priceValueEl.textContent = currentProperty.price_sale ? formatBRL(currentProperty.price_sale) : 'Consulte';
            datesInfoEl.classList.add('hidden');
            saleForm.classList.remove('hidden');
            rentForm.classList.add('hidden');
        } else {
            // Se alguém abrir um imóvel de aluguel por link direto
            priceLabelEl.textContent = 'Preço Diária';
            priceValueEl.textContent = formatBRL(currentProperty.price_daily);
            datesInfoEl.classList.remove('hidden');
            saleForm.classList.add('hidden');
            rentForm.classList.remove('hidden');
        }
        
        detailsModal.classList.add('show');
    }

    // === AQUI ESTÁ A MÁGICA DO FILTRO DE VENDA ===
    function generatePropertyCards() {
        const grid = document.getElementById('properties-grid');
        if (!grid) return;

        // FILTRA APENAS IMÓVEIS DE VENDA (SALE)
        const saleProperties = propertyData.filter(prop => prop.mode === 'sale');

        if (saleProperties.length === 0) {
            grid.innerHTML = '<p class="col-span-3 text-center text-gray-500">Nenhum imóvel à venda encontrado no momento.</p>';
            return;
        }

        grid.innerHTML = saleProperties.map(prop => `
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-200 dark:border-gray-700 hover:shadow-lg hover:-translate-y-1 transition-all duration-300 group cursor-pointer" onclick="openModal('${prop.id}')">
                <div class="relative">
                    <img class="h-64 w-full object-cover" data-alt="${prop.title}" src="${prop.images[0] || 'https://placehold.co/800x600/e2e8f0/e2e8f0?text=Imóvel'}"/>
                    <div class="absolute bottom-0 left-0 right-0 h-20 bg-gradient-to-t from-black/60 to-transparent"></div>
                    <div class="absolute bottom-3 left-3 text-white">
                        <p class="font-display font-bold text-lg drop-shadow-md">${formatBRL(prop.price_sale)}</p>
                        <p class="text-xs">Venda</p>
                    </div>
                </div>
                <div class="p-5">
                    <h3 class="font-display font-bold text-lg text-gray-900 dark:text-white group-hover:text-primary transition-colors">${prop.title}</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400 mb-3">${prop.location}</p>
                    <button class="w-full mt-4 py-2.5 px-4 bg-primary dark:bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary/90 transition-colors">Ver Detalhes</button>
                </div>
            </div>
        `).join('');
    }

    function setupSaleFormListener() {
        const saleForm = document.getElementById('modal-sale-form');
        if (!saleForm) return;
        saleForm.addEventListener('submit', async (e) => { 
            e.preventDefault();
            const name = document.getElementById('sale-guest-name').value.trim();
            const contact = document.getElementById('sale-guest-contact').value.trim();
            if (!name || !contact) { showAlert('Preencha os dados.'); return; }
            const message = `Olá! Interesse na compra: "${currentProperty.title}" (ID: ${currentProperty.id}).\nNome: ${name}\nContato: ${contact}`;
            const whatsappUrl = `https://api.whatsapp.com/send?phone=${MODAL_WHATSAPP_NUMBER}&text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
            document.getElementById('details-modal').classList.remove('show');
        });
    }

    function initializePage() {
        const closeBtn = document.getElementById('close-modal-button');
        if (closeBtn) {
             closeBtn.addEventListener('click', () => {
                document.getElementById('details-modal').classList.remove('show');
            });
        }
        const alertOkBtn = document.getElementById('alert-ok-button');
        if (alertOkBtn) alertOkBtn.addEventListener('click', () => document.getElementById('alert-modal').classList.remove('show'));

        setupSaleFormListener();
        generatePropertyCards();
    }
    document.addEventListener('DOMContentLoaded', initializePage);
</script>

<footer class="bg-gray-900 dark:bg-black text-gray-300">
    <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8 text-center">
        <p>© 2024 Curtindo SC. Todos os direitos reservados.</p>
    </div>
</footer>
</div>
</div>
</body></html>
